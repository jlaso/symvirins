---
# This playbook configures the virtual hosts


- name: HOSTS | Change apache user for vagrant
  lineinfile: dest=/etc/apache2/envvars regexp="export APACHE_RUN_USER=www-data" line="export APACHE_RUN_USER=vagrant"
  tags: hosts

- name: HOSTS | Change apache group for vagrant
  lineinfile: dest=/etc/apache2/envvars regexp="export APACHE_RUN_GROUP=www-data" line="export APACHE_RUN_GROUP=vagrant"
  tags: hosts

- name: HOSTS | Configuration file for Apache
  action: template src=etc-apache2-sites-available-{{ project }}.j2 dest=/etc/apache2/sites-available/{{ project }}.conf
  tags: hosts

- name: HOSTS | Enable {{ project }}
  action: command a2ensite {{ project }}
  tags: hosts


